<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Carros</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    </head>
    <body class="container">
        <h3>Formulário - Carros</h3>
        <form id="cadastroForm" method="POST">
            <div class="row">
                <div class="col-5">
                    <label for="marca" class="form-label">Marca:</label>
                    <input type="text" id="marca" name="marca" class="form-control" required/>
                </div>
                <div class="col-5">
                    <label for="modelo" class="form-label">Modelo:</label>
                    <input type="text" id="modelo" name="modelo" class="form-control" required/>
                </div>
                <div class="col-5">
                    <label for="ano" class="form-label">Ano:</label>
                    <input type="number" id="ano" name="ano" class="form-control" required/>
                </div>
                <div class="col-5">
                    <label for="cor" class="form-label">Cor:</label>
                    <input type="text" id="cor" name="cor" class="form-control" required/>
                </div>
                <div class="col-5">
                    <label for="kilometragem" class="form-label">Kilometragem:</label>
                    <input type="number" id="kilometragem" name="kilometragem" class="form-control" required/>
                </div>
                <div class="col-5">
                    <label for="valor_fipe" class="form-label">Valor Tabela Fipe:</label>
                    <input type="number" id="valor_fipe" name="valor_fipe" class="form-control" required/>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col">
                    <button class="btn btn-primary" type="button" onclick="salvarForm()">Salvar</button>
                    <button class="btn btn-primary" type="button" onclick="redefinir()">Redefinir</button>
                </div>
            </div>
        </form>
        
        <br>
        <hr>
        <br>
        <h5><div id="result" class="mt-3"></div></h5>

        <script>
            function Carro(marca, modelo, ano, cor, kilometragem, valor_fipe) {
            this.marca = marca;
            this.modelo = modelo;
            this.ano = ano;
            this.cor = cor;
            this.kilometragem = kilometragem;
            this.valor_fipe = valor_fipe;
        
            this.anosUtilizacao = function() {
                let anoAtual = new Date().getFullYear();
                return anoAtual - this.ano;
            };
        
            this.valorMercado = function() {
                if (this.kilometragem <= 30000) {
                    return this.valor_fipe * 1.1;
                }
                else if (this.kilometragem > 30000 && this.kilometragem <= 50000) {
                    return this.valor_fipe;
                }
                else {
                    return this.valor_fipe * 0.9;
                }
            };
        }
        
        function salvarForm() {
            const marca = document.getElementById('marca').value;
            const modelo = document.getElementById('modelo').value;
            const ano = parseInt(document.getElementById('ano').value);
            const cor = document.getElementById('cor').value;
            const kilometragem = parseInt(document.getElementById('kilometragem').value);
            const valor_fipe = parseFloat(document.getElementById('valor_fipe').value);
        
            const carro = new Carro(marca, modelo, ano, cor, kilometragem, valor_fipe);
        
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = "<p>Anos de utilização: " + carro.anosUtilizacao() + "</p><p>Valor de mercado: R$ " + carro.valorMercado().toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2}) + "</p>";
        }
        
        function redefinir() {
            document.getElementById("cadastroForm").reset();
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = "";
        }
        </script>
        <br>
        <br>
        <a href="Aula-120324.html">Voltar</a>
        
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        
    </body>
</html>
